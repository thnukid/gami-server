require "json"

module Gami
  class Game
   def initialize(input)
     @rules = []
     @input = JSON.parse(input)
   end

   def add(rule)
     @rules.push rule
   end

   def run
     @rules.each do |r|
       r.run
     end
   end

  end

  class Rule
    attr_reader :event, :condition, :action

    def initialize event, condition, action
      @event = event
      @condition = condition
      @action = action
    end

    def run

    end

    end
  end
end

payload = open("../../spec/fixtures/github_payload.json").read

  game = Gami::Game.new(payload)
  rules = [Gami::Rule.new(1,1,1),Gami::Rule.new(1,2,1)]
  game.add(rules)
  game.run
  game['payload']
